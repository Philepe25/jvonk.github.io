<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Mixing Milk | Johan Vonk’s Website</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Mixing Milk" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Given the Merry Milk Makers’ daily requirement of milk, the cost per unit for milk from each farmer, and the amount of milk available from each farmer; calculate the minimum amount of money that Merry Milk Makers must spend to meet their daily need for milk." />
<meta property="og:description" content="Given the Merry Milk Makers’ daily requirement of milk, the cost per unit for milk from each farmer, and the amount of milk available from each farmer; calculate the minimum amount of money that Merry Milk Makers must spend to meet their daily need for milk." />
<link rel="canonical" href="http://localhost:4000/usaco/2018/09/28/milk.html" />
<meta property="og:url" content="http://localhost:4000/usaco/2018/09/28/milk.html" />
<meta property="og:site_name" content="Johan Vonk’s Website" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-28T20:00:00-07:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"http://localhost:4000/usaco/2018/09/28/milk.html","headline":"Mixing Milk","dateModified":"2018-09-28T20:00:00-07:00","datePublished":"2018-09-28T20:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/usaco/2018/09/28/milk.html"},"description":"Given the Merry Milk Makers’ daily requirement of milk, the cost per unit for milk from each farmer, and the amount of milk available from each farmer; calculate the minimum amount of money that Merry Milk Makers must spend to meet their daily need for milk.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<meta name="google-site-verification" content="a_1tMrUlVNqdFzDGwh_T1IpHoH9qeFrNoVkUBOmi9j0" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#157878">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700"/>
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
        <link rel="stylesheet" type="text/css" href="/assets/css/site.css">
        <link rel="stylesheet" type="text/css" href="/assets/css/prism.css">
        <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css"></head>
    <body>
        <div class="navbar">
            <a href="http://localhost:4000">Home</a><a href="/about/">About</a><div class="dropdown">
                    <button class="dropbtn">USACO</button>
                    <i class="fa fa-caret-down"></i>
                    <div class="dropdown-content"><div class="dropdown">
                                    <button class="dropbtn">CHAPTER 1<i class="fa fa-caret-down"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="navbar"><div class="dropdown">
                                                    <button class="dropbtn">Section 2<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/09/26/beads.html">beads - Broken Necklace</a><a href="/usaco/2018/09/25/friday.html">friday - Friday the 13th</a><a href="/usaco/2018/09/25/gift1.html">gift1 - Greedy Gift Givers</a><a href="/usaco/2018/09/25/ride.html">ride - Your Ride Is Here</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 3<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/09/28/dualpal.html">dualpal - Dual Palindromes</a><a href="/usaco/2018/09/28/palsquare.html">palsquare - Palindromic Squares</a><a href="/usaco/2018/09/28/namenum.html">namenum - Name That Number</a><a href="/usaco/2018/09/28/transform.html">transform - Transformations</a><a href="/usaco/2018/09/27/milk2.html">milk2 - Milking Cows</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 4<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/09/30/skidesign.html">skidesign - Ski Course Design</a><a href="/usaco/2018/09/29/wormhole.html">wormhole - Wormholes</a><a href="/usaco/2018/09/29/combo.html">combo - Combination Lock</a><a href="/usaco/2018/09/29/crypt1.html">crypt1 - Prime Cryptarithm</a><a href="/usaco/2018/09/28/milk.html">milk - Mixing Milk</a><a href="/usaco/2018/09/28/barn1.html">barn1 - Barn Repair</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 5<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/10/02/milk3.html">milk3 - Mother's Milk</a><a href="/usaco/2018/10/01/ariprog.html">ariprog - Arithmetic Progressions</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 6<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/10/04/pprime.html">pprime - Prime Palindromes</a><a href="/usaco/2018/10/03/sprime.html">sprime - Superprime Rib</a><a href="/usaco/2018/10/03/numtri.html">numtri - Number Triangles</a></div>
                                                </div></div>
                                    </div>
                                </div><div class="dropdown">
                                    <button class="dropbtn">CHAPTER 2<i class="fa fa-caret-down"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="navbar"><div class="dropdown">
                                                    <button class="dropbtn">Section 1<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/10/10/holstein.html">holstein - Healthy Holsteins</a><a href="/usaco/2018/10/09/hamming.html">hamming - Hamming Codes</a><a href="/usaco/2018/10/08/sort3.html">sort3 - Sorting a Three-Valued Sequence</a><a href="/usaco/2018/10/08/castle.html">castle - The Castle</a><a href="/usaco/2018/10/05/frac1.html">frac1 - Ordered Fractions</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 2<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/10/12/lamps.html">lamps - Party Lamps</a><a href="/usaco/2018/10/12/runround.html">runround - Runaround Numbers</a><a href="/usaco/2018/10/11/subset.html">subset - Subset Sums</a><a href="/usaco/2018/10/10/preface.html">preface - Preface Numbering</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 3<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/10/17/concom.html">concom - Controlling Companies</a><a href="/usaco/2018/10/17/money.html">money - Money Systems</a><a href="/usaco/2018/10/15/zerosum.html">zerosum - Zero Sum</a><a href="/usaco/2018/10/15/nocows.html">nocows - Cow Pedigrees</a><a href="/usaco/2018/10/15/prefix.html">prefix - Longest Prefix</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 4<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/10/31/fracdec.html">fracdec - Fractions to Decimals</a><a href="/usaco/2018/10/31/cowtour.html">cowtour - Cow Tours</a><a href="/usaco/2018/10/27/comehome.html">comehome - Bessie Come Home</a><a href="/usaco/2018/10/22/maze1.html">maze1 - Overfencing</a><a href="/usaco/2018/10/22/ttwo.html">ttwo - The Tamworth Two</a></div>
                                                </div></div>
                                    </div>
                                </div><div class="dropdown">
                                    <button class="dropbtn">CHAPTER 3<i class="fa fa-caret-down"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="navbar"><div class="dropdown">
                                                    <button class="dropbtn">Section 1<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/11/06/inflate.html">inflate - Score Inflation</a><a href="/usaco/2018/11/05/contact.html">contact - Contact</a><a href="/usaco/2018/11/05/humble.html">humble - Humble Numbers</a><a href="/usaco/2018/11/03/stamps.html">stamps - Stamps</a><a href="/usaco/2018/11/01/agrinet.html">agrinet - Agri-Net</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 2<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2018/12/11/msquare.html">msquare - Magic Squares</a><a href="/usaco/2018/12/11/butter.html">butter - Magic Squares</a><a href="/usaco/2018/11/15/spin.html">spin - Spinning Wheels</a><a href="/usaco/2018/11/14/ratios.html">ratios - Feed Ratios</a><a href="/usaco/2018/11/07/kimbits.html">kimbits - Stringsobits</a><a href="/usaco/2018/11/07/fact4.html">fact4 - Factorials</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 3<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2019/01/14/game1.html">game1 - A Game</a><a href="/usaco/2019/01/12/camelot.html">camelot - Camelot</a><a href="/usaco/2018/12/20/range.html">range - Home on the Range</a><a href="/usaco/2018/12/20/shopping.html">shopping - Shopping Offers</a><a href="/usaco/2018/12/12/fence.html">fence - Riding the Fences</a></div>
                                                </div><div class="dropdown">
                                                    <button class="dropbtn">Section 4<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2019/01/28/rockers.html">rockers - Raucous Rockers</a><a href="/usaco/2019/01/22/fence9.html">fence9 - Electric Fence</a><a href="/usaco/2019/01/16/heritage.html">heritage - American Heritage</a></div>
                                                </div></div>
                                    </div>
                                </div><div class="dropdown">
                                    <button class="dropbtn">CHAPTER 4<i class="fa fa-caret-down"></i>
                                    </button>
                                    <div class="dropdown-content">
                                        <div class="navbar"><div class="dropdown">
                                                    <button class="dropbtn">Section 1<i class="fa fa-caret-down"></i>
                                                    </button>
                                                    <div class="dropdown-content"><a href="/usaco/2019/01/28/nuggets.html">nuggets - Beef McNuggets</a></div>
                                                </div></div>
                                    </div>
                                </div></div>
                </div><div class="dropdown">
                    <button class="dropbtn">PORTFOLIO</button>
                    <i class="fa fa-caret-down"></i>
                    <div class="dropdown-content"><a href="/portfolio/2018/11/23/overview.html">Overview</a></div>
                </div><div id="tipue_search_wrapper" style="float:right;display: table-cell;vertical-align: middle;height: 50px;">
                <form action="/search">
                    <div class="tipue_search_left"><svg class="tipue_search_icon" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#FFFFFF" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></div>
                    <div class="tipue_search_right"><input type="text" name="q" id="tipue_search_input" placeholder="Search" autocomplete=off required></div>
                    <div style="clear: both;"></div>
                </form>
            </div>
        </div>
        <header class="page-header" role="banner"><h1 class="project-name">Mixing Milk</h1>
                    <div class="post-categories"><h2><a href="http://localhost:4000#USACO">USACO</a></h2></div><h2 class="project-tagline">Given the Merry Milk Makers' daily requirement of milk, the cost per unit for milk from each farmer, and the amount of milk available from each farmer; calculate the minimum amount of money that Merry Milk Makers must spend to meet their daily need for milk.</h2><a href="//github.com/jvonk/USACO/blob/master/Chapter_1/milk/milk.java" class="btn">Code on GitHub</a><br><a href="//github.com/jvonk/jvonk.github.io/blob/master/_posts/2018-09-29-milk.markdown" class="btn">Current Page on GitHub</a></header>
        <main id="content" class="main-content" role="main">
            <div class="realcontent"><a id="skip-to-content" href="#code">Skip to code</a><br>
                <a id="skip-to-content2" href="#analysis">Skip to analysis</a><br>
                <br>
                <em>This is a explanation of this problem from USACO's training website. I have converted it to markdown. Please do not just copy code; you will not learn anything; at least type it out and understand so you can do it yourself in the future!</em><p>The Merry Milk Makers company buys milk from farmers, packages it into attractive 1- and 2-Unit bottles, and then sells that milk to grocery stores so we can each start our day with delicious cereal and milk.</p>

<p>Since milk packaging is such a difficult business in which to make money, it is important to keep the costs as low as possible. Help Merry Milk Makers purchase the farmers’ milk in the cheapest possible manner. The MMM company has an extraordinarily talented marketing department and knows precisely how much milk they need each day to package for their customers.</p>

<p>The company has contracts with several farmers from whom they may purchase milk, and each farmer has a (potentially) different price at which they sell milk to the packing plant. Of course, a herd of cows can only produce so much milk each day, so the farmers already know how much milk they will have available.</p>

<p>Each day, Merry Milk Makers can purchase an integer number of units of milk from each farmer, a number that is always less than or equal to the farmer’s limit (and might be the entire production from that farmer, none of the production, or any integer in between).</p>

<p>Given:</p>

<ul>
  <li>The Merry Milk Makers’ daily requirement of milk</li>
  <li>The cost per unit for milk from each farmer</li>
  <li>The amount of milk available from each farmer</li>
</ul>

<p>calculate the minimum amount of money that Merry Milk Makers must spend to meet their daily need for milk.</p>

<p>Note: The total milk produced per day by the farmers will always be sufficient to meet the demands of the Merry Milk Makers even if the prices are high.</p>

<h3 id="program-name-milk">PROGRAM NAME: milk</h3>

<h3 id="input-format">INPUT FORMAT</h3>

<table>
  <tbody>
    <tr>
      <td>Line 1:</td>
      <td>Two integers, N and M. The first value, N, (0 &lt;= N &lt;= 2,000,000) is the amount of milk that Merry Milk Makers wants per day. The second, M, (0 &lt;= M &lt;= 5,000) is the number of farmers that they may buy from.</td>
    </tr>
    <tr>
      <td>Lines 2 through M+1:</td>
      <td>The next M lines each contain two integers: Pi and Ai. Pi (0 &lt;= Pi &lt;= 1,000) is price in cents that farmer i charges. Ai (0 &lt;= Ai &lt;= 2,000,000) is the amount of milk that farmer i can sell to Merry Milk Makers per day.</td>
    </tr>
  </tbody>
</table>

<h3 id="sample-input-file-milkin">SAMPLE INPUT (file milk.in)</h3>

<p>100 5
5 20
9 40
3 10
8 80
6 30</p>

<h3 id="input-explanation">INPUT EXPLANATION</h3>

<p>100 5 – MMM wants 100 units of milk from 5 farmers<br />
5 20 – Farmer 1 says, “I can sell you 20 units at 5 cents per unit”<br />
9 40 etc.<br />
3 10 – Farmer 3 says, “I can sell you 10 units at 3 cents per unit”<br />
8 80 etc.<br />
6 30 – Farmer 5 says, “I can sell you 30 units at 6 cents per unit”</p>

<h3 id="output-format">OUTPUT FORMAT</h3>

<p>A single line with a single integer that is the minimum cost that Merry Milk Makers must pay for one day’s milk.</p>

<h3 id="sample-output-file-milkout">SAMPLE OUTPUT (file milk.out)</h3>

<p>630</p>

<h3 id="output-explanation">OUTPUT EXPLANATION</h3>

<p>Here’s how the MMM company spent only 630 cents to purchase 100 units of milk:</p>

<table>
  <thead>
    <tr>
      <th>Price per unit</th>
      <th>Units available</th>
      <th>Units bought</th>
      <th>Price * # units</th>
      <th>Total cost</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>5</td>
      <td>20</td>
      <td>20</td>
      <td>5*20</td>
      <td>100</td>
      <td> </td>
    </tr>
    <tr>
      <td>9</td>
      <td>40</td>
      <td>0</td>
      <td> </td>
      <td> </td>
      <td>Bought no milk from farmer 2</td>
    </tr>
    <tr>
      <td>3</td>
      <td>10</td>
      <td>10</td>
      <td>3*10</td>
      <td>30</td>
      <td> </td>
    </tr>
    <tr>
      <td>8</td>
      <td>80</td>
      <td>40</td>
      <td>8*40</td>
      <td>320</td>
      <td>Did not buy all 80 units!</td>
    </tr>
    <tr>
      <td>6</td>
      <td>30</td>
      <td>30</td>
      <td>6*30</td>
      <td>180</td>
      <td> </td>
    </tr>
    <tr>
      <td>Total</td>
      <td>180</td>
      <td>100</td>
      <td> </td>
      <td>630</td>
      <td>Cheapest total cost</td>
    </tr>
  </tbody>
</table>
<div id="code">
                        <div><br>
                            <h2>CODE</h2>
                            <details>
                                <summary>Java</summary>
                                <pre class="line-numbers language-java" data-src="//raw.githubusercontent.com/jvonk/USACO/master/Chapter_1/milk/milk.java"></pre>
                            </details>
                        </div>
                        <div><br>
                            <details>
                                <summary>C++</summary>
                                <pre class="line-numbers language-cpp" data-src="//raw.githubusercontent.com/jvonk/USACO/master/Chapter_1/milk/milk.cpp"></pre>
                            </details>
                        </div>
                        <div><br>
                            <details>
                                <summary>Pascal</summary>
                                <pre class="line-numbers language-pascal"
                                    data-src="//raw.githubusercontent.com/jvonk/USACO/master/Chapter_1/milk/milk.pas"></pre>
                            </details>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div id="analysis"><h2>ANALYSIS</h2><details>
  <summary>
    <p>Russ Cox</p>
  </summary>

  <p>Since we’re acquiring things that are all of the same size (in this case, units of milk), a greedy solution will suffice: we sort the farmers by price, and then buy milk from the farmers with the lowest prices, always completely exhausting one farmer’s supply before moving on to the next one.</p>

  <p>To do this, we read the input into Farmer structures, sort the array by price, and then walk the array, buying milk until we’ve got all the milk we want.</p>

  <pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;assert.h&gt;

#define MAXFARMER 5000

typedef struct Farmer Farmer;
struct Farmer {
	int p;	/* price per gallon */
	int a;	/* amount to sell */
};

int
farmcmp(const void *va, const void *vb)
{
	return ((Farmer*)va)-&gt;p - ((Farmer*)vb)-&gt;p;
}

int nfarmer;
Farmer farmer[MAXFARMER];

void
main(void)
{
	FILE *fin, *fout;
	int i, n, a, p;

	fin = fopen("milk.in", "r");
	fout = fopen("milk.out", "w");

	assert(fin != NULL &amp;&amp; fout != NULL);

	fscanf(fin, "%d %d", &amp;n, &amp;nfarmer);
	for(i=0; i&lt;nfarmer; i++)
		fscanf(fin, "%d %d", &amp;farmer[i].p, &amp;farmer[i].a);

	qsort(farmer, nfarmer, sizeof(farmer[0]), farmcmp);

	p = 0;
	for(i=0; i&lt;nfarmer &amp;&amp; n &gt; 0; i++) {
		/* take as much as possible from farmer[i], up to amount n */
		a = farmer[i].a;
		if(a &gt; n)
			a = n;
		p += a*farmer[i].p;
		n -= a;
	}

	fprintf(fout, "%d\n", p);
	exit(0);
}
</code></pre>

</details>

<details>
  <summary>
    <p>Ran Pang</p>
  </summary>

  <p>Here is a program that solves the problem in linear time (with respect to the maximum price, and number of farmers, since we have to read in the data anyway), while I think the qsort used by the solution would consume O(n log n), where n is the number of farmers.</p>

  <pre><code class="language-cpp">#include&lt;stdio.h&gt;

#define MAXPRICE 1001

int amount_for_price[MAXPRICE]={0};
int N, M;

int Cal(void);
int Read(void);

int main(void) {
    Read();
    Cal();
    return 0;
}

int Cal(void) {
    int i;
    int price_total=0;
    int milk_total=0;
    for(i=0;i&lt;MAXPRICE;i++) {
        if(amount_for_price[i]) {
            if(milk_total+amount_for_price[i]&lt;N) {
                price_total+=(i*amount_for_price[i]);
                milk_total+=amount_for_price[i];
            }
            else {
                int amount_needed = N-milk_total;
                price_total+=(i*amount_needed);
                break;
            }
        }
    }
    {
        FILE* out=fopen("milk.out","w");
        fprintf(out,"%d\n",price_total);
        fclose(out);
    }
    return 0;
}

int Read(void) {
    FILE* in = fopen("milk.in","r");
    int i, price, amount;
    fscanf(in,"%d %d",&amp;N,&amp;M);
    for(i=0;i&lt;M;i++) {
        fscanf(in, "%d %d", &amp;(price), &amp;(amount));
        amount_for_price[price]+=amount;
    }
    fclose(in);
    return 0;
}
</code></pre>

</details>

<details>
  <summary>
    <p>Adam Okruhlica</p>
  </summary>

  <p>It is unnecessary to sort the prices with quicksort in O(n.lg.n) time, because there is an upper limit of the a single price ($1000) and we know that all prices are integral. We can sort this array with count sort. We establish a ‘box’ for each of the available prices (0..1000). We save the input to an array. Then we iterate through each farmer and we memoize his index in the (0..1000) array on index equivalent to the price he offers us. Hence there can be more farmers offering the same price we put them in a linked list. Finally we iterate the array from 0 to 1000 andpick the farmers’ indexes from the linked lists. It’s pretty easy to implement, and the time complexity is O(n).</p>

  <pre><code class="language-pascal">program milk;

type pList = ^List;
      List = record
                farmer:longint;
                next:pList;
              end;
      HeadList = record
                   head:pList;
                   tail:pList;
                  end;

var fIn,fOut:text;
    sofar,i,x,want,cnt,a,b:longint;
    sorted,cost,amount:array[1..5010] of longint;
    csort:array[0..1010] of HeadList;

    t:pList;

begin
    assign(fIn,'milk.in');reset(fIn);
    assign(fOut,'milk.out'); rewrite(fOut);

    readln(fIn,want,cnt);
    for i:=1 to cnt do readln(fIn,cost[i],amount[i]);

    for i:=0 to 1000 do begin
         new(csort[i].head);
         csort[i].tail:=csort[i].head;
         csort[i].head^.farmer:=-1;
    end;

    {Cast indexes into the array}
    for i:=1 to cnt do begin

       t:=csort[cost[i]].tail;
       if t^.farmer = -1 then t^.farmer:=i;
       new(t^.next);
       t^.next^.farmer:=-1;
       csort[cost[i]].tail:=t^.next;
    end;

    {Pick indexes}
    x:=1;
    for i:=0 to 1000 do begin
        t:=csort[i].head;
        while t^.farmer &gt; 0 do begin
          sorted[x]:=t^.farmer;
          inc(x);
          t:=t^.next;
        end;
    end;

    sofar:=0;
    for i:=1 to cnt do begin
      if want &lt; amount[sorted[i]] then begin
        inc(sofar,want*cost[sorted[i]]);
        want:=0; break;
      end

      else inc(sofar,amount[sorted[i]]*cost[sorted[i]]);
      dec(want,amount[sorted[i]]);
    end;

    writeln(fOut,sofar);
    close(fOut);
end.
</code></pre>

</details>

<details>
  <summary>
    <p>Dwayne Crooks</p>
  </summary>

  <p>Do we really need the linked list that SVK’s Adam Okruhlica uses in his solution? I don’t think so. Here is a better solution that uses essentially the same idea as Adam’s solution but does away with the linked list. Takes O(max(MAXP,M)) time, where MAXP=1000 and M&lt;=5000 is the input size. Editors note: Dwayne should be using long long integers (64 bit) instead of int’s in order to avoid overflow.</p>

  <pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;

#define MAXP 1000

using namespace std;

int main() {
    ifstream in("milk.in");
    ofstream out("milk.out");
    
    int N, M;
    int P[MAXP+1];
    
    in &gt;&gt; N &gt;&gt; M;
    for (int i = 0; i &lt;= MAXP; i++) P[i]=0;
    for (int i = 0; i &lt; M; i++) {
        int price, amt;
        in &gt;&gt; price &gt;&gt; amt;
        
         // we can add amounts that cost the same price
        // since x gallons costing c cents and
        //          y gollons costing c cents
        // is the same as
        //      x+y gallons costing c cents
        P[price] += amt;
    }
    
    // greedy choice: take as much of the item that
    // has the least price per gallon
    int res = 0;
    for (int p = 0; p&lt;=MAXP &amp;&amp; N&gt;0; p++) {
        if (P[p]&gt;0) {
            res+=p*(N&lt;P[p]?N:P[p]);
            N-=P[p];
        }
    }
    out &lt;&lt; res &lt;&lt; endl;
    
    in.close();
    out.close();
    
    return 0;
}
</code></pre>

</details>

<details>
  <summary>
    <p>Miroslav Paskov</p>
  </summary>

  <p>As the final word, Bulgaria’s Miroslav Paskov has distilled all the best ideas into a simple solution:</p>

  <pre><code class="language-cpp">#include &lt;fstream&gt;
#define MAXPRICE 1001
using namespace std;

int main() {
    ifstream fin ("milk.in");
    ofstream fout ("milk.out");
    unsigned int i, needed, price, paid, farmers, amount, milk[MAXPRICE][2];
    paid = 0;
    fin&gt;&gt;needed&gt;&gt;farmers;
    for(i = 0;i&lt;farmers;i++){
        fin&gt;&gt;price&gt;&gt;amount;
        milk[price][0] += amount;   
    } 
    for(i = 0; i&lt;MAXPRICE &amp;&amp; needed;i++){
        if(needed &gt;= milk[i][0]) {
            needed -= milk[i][0];
            paid += milk[i][0] * i;
        } else if(milk[i][0] &gt; 0) {
            paid += i*needed;
            needed = 0;     
        }
    }
    fout &lt;&lt; paid &lt;&lt; endl; 
    return 0;
}
</code></pre>

</details>

</div>
                    <br>
                    <a id="skip-to-main" href="#content">Back to top</a></div><footer class="site-footer realcontent"><span class="site-footer-owner"><a href="//github.com/jvonk/USACO/blob/master/Chapter_1/milk/milk.java">USACO - milk</a>
                            is created by
                            <a href="https://github.com/jvonk">
                                jvonk</a>
                            .
                        </span></footer></main>
        <script src="/assets/js/prism.js"></script>
        <script async="async" type="text/javascript" src="/assets/tipuesearch/tipuesearch_content.js"></script>
        <script async="async" type="text/javascript" src="/assets/tipuesearch/tipuesearch_set.js"></script>
        <script async="async" type="text/javascript" src="/assets/tipuesearch/tipuesearch.min.js"></script>
        <script async="async" type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    </body>
</html>